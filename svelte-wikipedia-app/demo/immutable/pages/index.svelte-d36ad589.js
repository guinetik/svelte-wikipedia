import{S as L,i as M,s as Y,e as E,c as D,a as A,d as p,b as _,U as Z,g as I,I as g,t as F,h as C,j as H,k as T,m as x,W as he,a0 as _e,a3 as de,K as me,l as J,w as B,x as z,y as K,q as S,o as N,B as U,n as R,a4 as ge,p as V,a5 as ke,J as ee,G as ve,N as be,v as we}from"../chunks/index-f0dd9566.js";import{c as ye,f as j,d as $e,e as Ee,a as G,Y as De,b as Ae,h as te}from"../chunks/index-bb7c7d40.js";import{W as O}from"../chunks/WikiArticle.svelte_svelte_type_style_lang-9712563d.js";import"../chunks/singletons-e01e0108.js";function le(s,e,i){const l=s.slice();return l[1]=e[i],l}function ae(s){let e,i,l,r,t,a;return{c(){e=E("div"),i=E("a"),l=E("img"),this.h()},l(n){e=D(n,"DIV",{class:!0});var o=A(e);i=D(o,"A",{href:!0,target:!0,class:!0});var c=A(i);l=D(c,"IMG",{alt:!0,src:!0,class:!0}),c.forEach(p),o.forEach(p),this.h()},h(){_(l,"alt",r=s[0].title),Z(l.src,t=s[0].image)||_(l,"src",t),_(l,"class","w-full z-10 object-top object-covers"),_(i,"href",a=s[0].link),_(i,"target","_blank"),_(i,"class","dark:text-cyan-300 text-blue-600"),_(e,"class","bg-white")},m(n,o){I(n,e,o),g(e,i),g(i,l)},p(n,o){o&1&&r!==(r=n[0].title)&&_(l,"alt",r),o&1&&!Z(l.src,t=n[0].image)&&_(l,"src",t),o&1&&a!==(a=n[0].link)&&_(i,"href",a)},d(n){n&&p(e)}}}function re(s){let e,i=s[0].text+"",l,r;return{c(){e=E("p"),l=F(i),this.h()},l(t){e=D(t,"P",{class:!0});var a=A(e);l=C(a,i),a.forEach(p),this.h()},h(){_(e,"class",r="dark:text-gray-300 text-gray-700 text-base text-ellipsis "+(s[0].image?"article-text":"article-text-expanded")+" svelte-1694y91")},m(t,a){I(t,e,a),g(e,l)},p(t,a){a&1&&i!==(i=t[0].text+"")&&H(l,i),a&1&&r!==(r="dark:text-gray-300 text-gray-700 text-base text-ellipsis "+(t[0].image?"article-text":"article-text-expanded")+" svelte-1694y91")&&_(e,"class",r)},d(t){t&&p(e)}}}function ie(s){let e,i,l=s[1]+"",r,t,a;return{c(){e=E("a"),i=E("span"),r=F(l),t=T(),this.h()},l(n){e=D(n,"A",{target:!0,href:!0});var o=A(e);i=D(o,"SPAN",{class:!0});var c=A(i);r=C(c,l),c.forEach(p),t=x(o),o.forEach(p),this.h()},h(){_(i,"class","inline-block bg-gray-200 rounded-full px-3 py-1 text-sm font-semibold text-gray-700 mr-2 mb-2"),_(e,"target","_blank"),_(e,"href",a=s[1].includes("views")?s[0].link:s[0].link.replace(s[0].link.split("/").pop(),s[1]))},m(n,o){I(n,e,o),g(e,i),g(i,r),g(e,t)},p(n,o){o&1&&l!==(l=n[1]+"")&&H(r,l),o&1&&a!==(a=n[1].includes("views")?n[0].link:n[0].link.replace(n[0].link.split("/").pop(),n[1]))&&_(e,"href",a)},d(n){n&&p(e)}}}function Se(s){let e,i,l,r,t,a=s[0].title+"",n,o,c,v,u,m,w,y,d=s[0].image&&ae(s),b=s[0].text&&re(s),P=s[0].tags,$=[];for(let f=0;f<P.length;f+=1)$[f]=ie(le(s,P,f));return{c(){e=E("article"),d&&d.c(),i=T(),l=E("div"),r=E("a"),t=E("h2"),n=F(a),c=T(),b&&b.c(),v=T(),u=E("div");for(let f=0;f<$.length;f+=1)$[f].c();this.h()},l(f){e=D(f,"ARTICLE",{class:!0});var h=A(e);d&&d.l(h),i=x(h),l=D(h,"DIV",{class:!0});var k=A(l);r=D(k,"A",{href:!0,target:!0,class:!0});var W=A(r);t=D(W,"H2",{class:!0});var Q=A(t);n=C(Q,a),Q.forEach(p),W.forEach(p),c=x(k),b&&b.l(k),k.forEach(p),v=x(h),u=D(h,"DIV",{class:!0});var X=A(u);for(let q=0;q<$.length;q+=1)$[q].l(X);X.forEach(p),h.forEach(p),this.h()},h(){_(t,"class","font-bold text-xl mb-2 hover:underline"),_(r,"href",o=s[0].link),_(r,"target","_blank"),_(r,"class","dark:text-cyan-300 text-blue-600"),_(l,"class","px-6 py-4"),_(u,"class","px-6 pb-2"),_(e,"class","rounded overflow-hidden shadow-lg bg-white dark:bg-gray-700 dark:border-l-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white")},m(f,h){I(f,e,h),d&&d.m(e,null),g(e,i),g(e,l),g(l,r),g(r,t),g(t,n),g(l,c),b&&b.m(l,null),g(e,v),g(e,u);for(let k=0;k<$.length;k+=1)$[k].m(u,null);y=!0},p(f,[h]){if(s=f,s[0].image?d?d.p(s,h):(d=ae(s),d.c(),d.m(e,i)):d&&(d.d(1),d=null),(!y||h&1)&&a!==(a=s[0].title+"")&&H(n,a),(!y||h&1&&o!==(o=s[0].link))&&_(r,"href",o),s[0].text?b?b.p(s,h):(b=re(s),b.c(),b.m(l,null)):b&&(b.d(1),b=null),h&1){P=s[0].tags;let k;for(k=0;k<P.length;k+=1){const W=le(s,P,k);$[k]?$[k].p(W,h):($[k]=ie(W),$[k].c(),$[k].m(u,null))}for(;k<$.length;k+=1)$[k].d(1);$.length=P.length}},i(f){y||(he(()=>{w&&w.end(1),m=_e(e,j($e),{y:100*s[0].i,duration:1e3,delay:100*s[0].i%10,easing:ye}),m.start()}),y=!0)},o(f){m&&m.invalidate(),w=de(e,j(G),{duration:500,easing:Ee}),y=!1},d(f){f&&p(e),d&&d.d(),b&&b.d(),me($,f),f&&w&&w.end()}}}function Ie(s,e,i){let{article:l={title:"Title",text:"text",tags:["tags"],link:"https://en.wikipedia.org/wiki/JavaScript",image:"https://upload.wikimedia.org/wikipedia/commons/thumb/9/91/JavaScript_screenshot.png/450px-JavaScript_screenshot.png"}}=e;return s.$$set=r=>{"article"in r&&i(0,l=r.article)},[l]}class Ne extends L{constructor(e){super(),M(this,e,Ie,Se,Y,{article:0})}}function se(s,e,i){const l=s.slice();return l[1]=e[i],l}function ne(s,e){let i,l,r;return l=new Ne({props:{article:e[1]}}),{key:s,first:null,c(){i=J(),B(l.$$.fragment),this.h()},l(t){i=J(),z(l.$$.fragment,t),this.h()},h(){this.first=i},m(t,a){I(t,i,a),K(l,t,a),r=!0},p(t,a){e=t;const n={};a&1&&(n.article=e[1]),l.$set(n)},i(t){r||(S(l.$$.fragment,t),r=!0)},o(t){N(l.$$.fragment,t),r=!1},d(t){t&&p(i),U(l,t)}}}function Te(s){let e,i,l=[],r=new Map,t,a=s[0];const n=o=>o[1].i;for(let o=0;o<a.length;o+=1){let c=se(s,a,o),v=n(c);r.set(v,l[o]=ne(v,c))}return{c(){e=E("section"),i=E("div");for(let o=0;o<l.length;o+=1)l[o].c();this.h()},l(o){e=D(o,"SECTION",{});var c=A(e);i=D(c,"DIV",{class:!0});var v=A(i);for(let u=0;u<l.length;u+=1)l[u].l(v);v.forEach(p),c.forEach(p),this.h()},h(){_(i,"class","p-10 grid grid-cols-1 sm:grid-cols-1 md:grid-cols-3 lg:grid-cols-3 xl:grid-cols-3 gap-5")},m(o,c){I(o,e,c),g(e,i);for(let v=0;v<l.length;v+=1)l[v].m(i,null);t=!0},p(o,[c]){c&1&&(a=o[0],R(),l=ge(l,c,n,1,o,a,r,i,ke,ne,null,se),V())},i(o){if(!t){for(let c=0;c<a.length;c+=1)S(l[c]);t=!0}},o(o){for(let c=0;c<l.length;c+=1)N(l[c]);t=!1},d(o){o&&p(e);for(let c=0;c<l.length;c+=1)l[c].d()}}}function xe(s,e,i){let{articles:l=[]}=e;return s.$$set=r=>{"articles"in r&&i(0,l=r.articles)},[l]}class pe extends L{constructor(e){super(),M(this,e,xe,Te,Y,{articles:0})}}function oe(s){let e,i;return e=new pe({props:{articles:s[0]}}),{c(){B(e.$$.fragment)},l(l){z(e.$$.fragment,l)},m(l,r){K(e,l,r),i=!0},p(l,r){const t={};r&1&&(t.articles=l[0]),e.$set(t)},i(l){i||(S(e.$$.fragment,l),i=!0)},o(l){N(e.$$.fragment,l),i=!1},d(l){U(e,l)}}}function ce(s){let e,i,l,r=s[1].length>0&&fe(s),t=s[1].length==0&&ue(s);return{c(){r&&r.c(),e=T(),t&&t.c(),i=J()},l(a){r&&r.l(a),e=x(a),t&&t.l(a),i=J()},m(a,n){r&&r.m(a,n),I(a,e,n),t&&t.m(a,n),I(a,i,n),l=!0},p(a,n){a[1].length>0?r?(r.p(a,n),n&2&&S(r,1)):(r=fe(a),r.c(),S(r,1),r.m(e.parentNode,e)):r&&(R(),N(r,1,1,()=>{r=null}),V()),a[1].length==0?t?(t.p(a,n),n&2&&S(t,1)):(t=ue(a),t.c(),S(t,1),t.m(i.parentNode,i)):t&&(R(),N(t,1,1,()=>{t=null}),V())},i(a){l||(S(r),S(t),l=!0)},o(a){N(r),N(t),l=!1},d(a){r&&r.d(a),a&&p(e),t&&t.d(a),a&&p(i)}}}function fe(s){let e,i,l,r,t=s[4]("home_featured_header")+"",a,n,o=s[2].toLocaleDateString()+"",c,v,u,m,w,y,d,b,P,$;return d=new pe({props:{articles:s[1]}}),{c(){e=E("h1"),i=E("span"),l=F("\u21DC"),r=T(),a=F(t),n=T(),c=F(o),v=T(),u=E("span"),m=F("\u21DD"),y=T(),B(d.$$.fragment),this.h()},l(f){e=D(f,"H1",{class:!0});var h=A(e);i=D(h,"SPAN",{class:!0});var k=A(i);l=C(k,"\u21DC"),k.forEach(p),r=x(h),a=C(h,t),n=x(h),c=C(h,o),v=x(h),u=D(h,"SPAN",{class:!0});var W=A(u);m=C(W,"\u21DD"),W.forEach(p),h.forEach(p),y=x(f),z(d.$$.fragment,f),this.h()},h(){_(i,"class","dark:text-cyan-300 dark:hover:text-cyan-500 dark:active:text-cyan-700 hover:underline cursor-pointer"),_(u,"class",w=s[3]?"dark:text-cyan-300 dark:hover:text-cyan-500 dark:active:text-cyan-700 hover:underline cursor-pointer":"text-gray-400"),_(e,"class","text-center dark:text-white text-gray-800 text-5xl mt-4 italic")},m(f,h){I(f,e,h),g(e,i),g(i,l),g(e,r),g(e,a),g(e,n),g(e,c),g(e,v),g(e,u),g(u,m),I(f,y,h),K(d,f,h),b=!0,P||($=[ee(i,"click",s[5]),ee(u,"click",s[6])],P=!0)},p(f,h){(!b||h&16)&&t!==(t=f[4]("home_featured_header")+"")&&H(a,t),(!b||h&4)&&o!==(o=f[2].toLocaleDateString()+"")&&H(c,o),(!b||h&8&&w!==(w=f[3]?"dark:text-cyan-300 dark:hover:text-cyan-500 dark:active:text-cyan-700 hover:underline cursor-pointer":"text-gray-400"))&&_(u,"class",w);const k={};h&2&&(k.articles=f[1]),d.$set(k)},i(f){b||(S(d.$$.fragment,f),b=!0)},o(f){N(d.$$.fragment,f),b=!1},d(f){f&&p(e),f&&p(y),U(d,f),P=!1,ve($)}}}function ue(s){let e,i,l=s[4]("home_header")+"",r,t,a,n=s[4]("home_aside")+"",o,c,v,u;return{c(){e=E("section"),i=E("h1"),r=F(l),t=T(),a=E("aside"),o=F(n),this.h()},l(m){e=D(m,"SECTION",{class:!0});var w=A(e);i=D(w,"H1",{class:!0});var y=A(i);r=C(y,l),t=x(y),a=D(y,"ASIDE",{class:!0});var d=A(a);o=C(d,n),d.forEach(p),y.forEach(p),w.forEach(p),this.h()},h(){_(a,"class","mt-5 italic text-4xl dark:text-cyan-300 text-blue-500"),_(i,"class","text-center dark:text-white text-gray-800 text-8xl mt-10"),_(e,"class","h-full")},m(m,w){I(m,e,w),g(e,i),g(i,r),g(i,t),g(i,a),g(a,o),u=!0},p(m,w){(!u||w&16)&&l!==(l=m[4]("home_header")+"")&&H(r,l),(!u||w&16)&&n!==(n=m[4]("home_aside")+"")&&H(o,n)},i(m){u||(he(()=>{v&&v.end(1),c=_e(e,j(G),{}),c.start()}),u=!0)},o(m){c&&c.invalidate(),v=de(e,j(G),{}),u=!1},d(m){m&&p(e),m&&v&&v.end()}}}function Pe(s){let e,i,l,r=s[0].length>0&&oe(s),t=s[0].length==0&&ce(s);return{c(){r&&r.c(),e=T(),t&&t.c(),i=J()},l(a){r&&r.l(a),e=x(a),t&&t.l(a),i=J()},m(a,n){r&&r.m(a,n),I(a,e,n),t&&t.m(a,n),I(a,i,n),l=!0},p(a,[n]){a[0].length>0?r?(r.p(a,n),n&1&&S(r,1)):(r=oe(a),r.c(),S(r,1),r.m(e.parentNode,e)):r&&(R(),N(r,1,1,()=>{r=null}),V()),a[0].length==0?t?(t.p(a,n),n&1&&S(t,1)):(t=ce(a),t.c(),S(t,1),t.m(i.parentNode,i)):t&&(R(),N(t,1,1,()=>{t=null}),V())},i(a){l||(S(r),S(t),l=!0)},o(a){N(r),N(t),l=!1},d(a){r&&r.d(a),a&&p(e),t&&t.d(a),a&&p(i)}}}function Fe(s,e,i){let l;be(s,De,u=>i(4,l=u));let r=[],t=[],a=new Date,n=!0;we(async()=>{console.log("app mounted!"),t.length==0&&await O.getFeaturedPosts(new Date)});const o=()=>{O.getFeaturedPosts(Ae(a))},c=()=>{v()&&O.getFeaturedPosts(te(a))},v=()=>{const u=new Date;return u.setHours(0),te(a).getTime()<u.getTime()};return O.searchResults.subscribe(u=>{i(0,r=u)}),O.featuredArticles.subscribe(u=>{if(u.data){i(2,a=u.featuredDate),i(3,n=v()),i(1,t=u.data.sort((m,w)=>{const y=m.views,d=w.views;return y<d?1:y===d?0:-1}));for(let m=0;m<t.length;m++)console.log(m,t[m].title),i(1,t[m].i=1+m,t)}}),[r,t,a,n,l,o,c]}class Oe extends L{constructor(e){super(),M(this,e,Fe,Pe,Y,{})}}export{Oe as default};
