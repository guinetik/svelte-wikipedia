import{S as V,i as j,s as G,e as w,c as $,a as E,d,b as h,R as X,g as T,I as p,t as N,h as W,j as H,k as P,m as F,U as ue,a0 as he,$ as de,M as pe,l as M,w as z,x as B,y as Y,q as S,o as x,B as U,n as R,a2 as me,p as q,a3 as ge,J as Z,G as ke,v as ve}from"../chunks/index-3103f734.js";import{c as be,a as we,e as $e,f as O}from"../chunks/index-6c6844be.js";import{W as L,a as ee,b as ye}from"../chunks/WikiApiClient-b5e92e71.js";import"../chunks/index-f15d94d8.js";function te(s,e,a){const r=s.slice();return r[1]=e[a],r}function le(s){let e,a,r,t,l,i;return{c(){e=w("div"),a=w("a"),r=w("img"),this.h()},l(n){e=$(n,"DIV",{class:!0});var o=E(e);a=$(o,"A",{href:!0,target:!0,class:!0});var c=E(a);r=$(c,"IMG",{alt:!0,src:!0,class:!0}),c.forEach(d),o.forEach(d),this.h()},h(){h(r,"alt",t=s[0].title),X(r.src,l=s[0].image)||h(r,"src",l),h(r,"class","w-full z-10 object-top object-cover max-h-80"),h(a,"href",i=s[0].link),h(a,"target","_blank"),h(a,"class","dark:text-cyan-300 text-blue-600"),h(e,"class","bg-white")},m(n,o){T(n,e,o),p(e,a),p(a,r)},p(n,o){o&1&&t!==(t=n[0].title)&&h(r,"alt",t),o&1&&!X(r.src,l=n[0].image)&&h(r,"src",l),o&1&&i!==(i=n[0].link)&&h(a,"href",i)},d(n){n&&d(e)}}}function re(s){let e,a=s[0].text+"",r;return{c(){e=w("p"),r=N(a),this.h()},l(t){e=$(t,"P",{class:!0});var l=E(e);r=W(l,a),l.forEach(d),this.h()},h(){h(e,"class","dark:text-gray-300 text-gray-700 text-base article-text text-ellipsis svelte-9ptqoz")},m(t,l){T(t,e,l),p(e,r)},p(t,l){l&1&&a!==(a=t[0].text+"")&&H(r,a)},d(t){t&&d(e)}}}function ae(s){let e,a,r=s[1]+"",t,l,i;return{c(){e=w("a"),a=w("span"),t=N(r),l=P(),this.h()},l(n){e=$(n,"A",{target:!0,href:!0});var o=E(e);a=$(o,"SPAN",{class:!0});var c=E(a);t=W(c,r),c.forEach(d),l=F(o),o.forEach(d),this.h()},h(){h(a,"class","inline-block bg-gray-200 rounded-full px-3 py-1 text-sm font-semibold text-gray-700 mr-2 mb-2"),h(e,"target","_blank"),h(e,"href",i=s[1].includes("views")?s[0].link:s[0].link.replace(s[0].link.split("/").pop(),s[1]))},m(n,o){T(n,e,o),p(e,a),p(a,t),p(e,l)},p(n,o){o&1&&r!==(r=n[1]+"")&&H(t,r),o&1&&i!==(i=n[1].includes("views")?n[0].link:n[0].link.replace(n[0].link.split("/").pop(),n[1]))&&h(e,"href",i)},d(n){n&&d(e)}}}function Ee(s){let e,a,r,t,l,i=s[0].title+"",n,o,c,u,_,y,D,I,b=s[0].image&&le(s),f=s[0].text&&re(s),k=s[0].tags,g=[];for(let m=0;m<k.length;m+=1)g[m]=ae(te(s,k,m));return{c(){e=w("article"),b&&b.c(),a=P(),r=w("div"),t=w("a"),l=w("h2"),n=N(i),c=P(),f&&f.c(),u=P(),_=w("div");for(let m=0;m<g.length;m+=1)g[m].c();this.h()},l(m){e=$(m,"ARTICLE",{class:!0});var A=E(e);b&&b.l(A),a=F(A),r=$(A,"DIV",{class:!0});var v=E(r);t=$(v,"A",{href:!0,target:!0,class:!0});var C=E(t);l=$(C,"H2",{class:!0});var K=E(l);n=W(K,i),K.forEach(d),C.forEach(d),c=F(v),f&&f.l(v),v.forEach(d),u=F(A),_=$(A,"DIV",{class:!0});var Q=E(_);for(let J=0;J<g.length;J+=1)g[J].l(Q);Q.forEach(d),A.forEach(d),this.h()},h(){h(l,"class","font-bold text-xl mb-2 hover:underline"),h(t,"href",o=s[0].link),h(t,"target","_blank"),h(t,"class","dark:text-cyan-300 text-blue-600"),h(r,"class","px-6 py-4"),h(_,"class","px-6 pb-2"),h(e,"class","rounded overflow-hidden shadow-lg bg-white dark:bg-gray-700 dark:border-l-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white")},m(m,A){T(m,e,A),b&&b.m(e,null),p(e,a),p(e,r),p(r,t),p(t,l),p(l,n),p(r,c),f&&f.m(r,null),p(e,u),p(e,_);for(let v=0;v<g.length;v+=1)g[v].m(_,null);I=!0},p(m,[A]){if(s=m,s[0].image?b?b.p(s,A):(b=le(s),b.c(),b.m(e,a)):b&&(b.d(1),b=null),(!I||A&1)&&i!==(i=s[0].title+"")&&H(n,i),(!I||A&1&&o!==(o=s[0].link))&&h(t,"href",o),s[0].text?f?f.p(s,A):(f=re(s),f.c(),f.m(r,null)):f&&(f.d(1),f=null),A&1){k=s[0].tags;let v;for(v=0;v<k.length;v+=1){const C=te(s,k,v);g[v]?g[v].p(C,A):(g[v]=ae(C),g[v].c(),g[v].m(_,null))}for(;v<g.length;v+=1)g[v].d(1);g.length=k.length}},i(m){I||(ue(()=>{D&&D.end(1),y=he(e,we,{y:100*s[0].i,duration:1e3,delay:100*s[0].i%10,easing:be}),y.start()}),I=!0)},o(m){y&&y.invalidate(),D=de(e,O,{duration:500,easing:$e}),I=!1},d(m){m&&d(e),b&&b.d(),f&&f.d(),pe(g,m),m&&D&&D.end()}}}function Se(s,e,a){let{article:r={title:"Title",text:"text",tags:["tags"],link:"https://en.wikipedia.org/wiki/JavaScript",image:"https://upload.wikimedia.org/wikipedia/commons/thumb/9/91/JavaScript_screenshot.png/450px-JavaScript_screenshot.png"}}=e;return s.$$set=t=>{"article"in t&&a(0,r=t.article)},[r]}class De extends V{constructor(e){super(),j(this,e,Se,Ee,G,{article:0})}}function ie(s,e,a){const r=s.slice();return r[1]=e[a],r}function se(s,e){let a,r,t;return r=new De({props:{article:e[1]}}),{key:s,first:null,c(){a=M(),z(r.$$.fragment),this.h()},l(l){a=M(),B(r.$$.fragment,l),this.h()},h(){this.first=a},m(l,i){T(l,a,i),Y(r,l,i),t=!0},p(l,i){e=l;const n={};i&1&&(n.article=e[1]),r.$set(n)},i(l){t||(S(r.$$.fragment,l),t=!0)},o(l){x(r.$$.fragment,l),t=!1},d(l){l&&d(a),U(r,l)}}}function Ae(s){let e,a,r=[],t=new Map,l,i=s[0];const n=o=>o[1].i;for(let o=0;o<i.length;o+=1){let c=ie(s,i,o),u=n(c);t.set(u,r[o]=se(u,c))}return{c(){e=w("section"),a=w("div");for(let o=0;o<r.length;o+=1)r[o].c();this.h()},l(o){e=$(o,"SECTION",{});var c=E(e);a=$(c,"DIV",{class:!0});var u=E(a);for(let _=0;_<r.length;_+=1)r[_].l(u);u.forEach(d),c.forEach(d),this.h()},h(){h(a,"class","p-10 grid grid-cols-1 sm:grid-cols-1 md:grid-cols-3 lg:grid-cols-3 xl:grid-cols-3 gap-5")},m(o,c){T(o,e,c),p(e,a);for(let u=0;u<r.length;u+=1)r[u].m(a,null);l=!0},p(o,[c]){c&1&&(i=o[0],R(),r=me(r,c,n,1,o,i,t,a,ge,se,null,ie),q())},i(o){if(!l){for(let c=0;c<i.length;c+=1)S(r[c]);l=!0}},o(o){for(let c=0;c<r.length;c+=1)x(r[c]);l=!1},d(o){o&&d(e);for(let c=0;c<r.length;c+=1)r[c].d()}}}function Ie(s,e,a){let{articles:r=[]}=e;return s.$$set=t=>{"articles"in t&&a(0,r=t.articles)},[r]}class _e extends V{constructor(e){super(),j(this,e,Ie,Ae,G,{articles:0})}}function ne(s){let e,a;return e=new _e({props:{articles:s[0]}}),{c(){z(e.$$.fragment)},l(r){B(e.$$.fragment,r)},m(r,t){Y(e,r,t),a=!0},p(r,t){const l={};t&1&&(l.articles=r[0]),e.$set(l)},i(r){a||(S(e.$$.fragment,r),a=!0)},o(r){x(e.$$.fragment,r),a=!1},d(r){U(e,r)}}}function oe(s){let e,a,r,t=s[1].length>0&&ce(s),l=s[1].length==0&&fe();return{c(){t&&t.c(),e=P(),l&&l.c(),a=M()},l(i){t&&t.l(i),e=F(i),l&&l.l(i),a=M()},m(i,n){t&&t.m(i,n),T(i,e,n),l&&l.m(i,n),T(i,a,n),r=!0},p(i,n){i[1].length>0?t?(t.p(i,n),n&2&&S(t,1)):(t=ce(i),t.c(),S(t,1),t.m(e.parentNode,e)):t&&(R(),x(t,1,1,()=>{t=null}),q()),i[1].length==0?l?n&2&&S(l,1):(l=fe(),l.c(),S(l,1),l.m(a.parentNode,a)):l&&(R(),x(l,1,1,()=>{l=null}),q())},i(i){r||(S(t),S(l),r=!0)},o(i){x(t),x(l),r=!1},d(i){t&&t.d(i),i&&d(e),l&&l.d(i),i&&d(a)}}}function ce(s){let e,a,r,t,l=s[2].toLocaleDateString()+"",i,n,o,c,u,_,y,D,I,b;return y=new _e({props:{articles:s[1]}}),{c(){e=w("h1"),a=w("span"),r=N("\u21DC"),t=N(`
			Most viewed articles for `),i=N(l),n=P(),o=w("span"),c=N("\u21DD"),_=P(),z(y.$$.fragment),this.h()},l(f){e=$(f,"H1",{class:!0});var k=E(e);a=$(k,"SPAN",{class:!0});var g=E(a);r=W(g,"\u21DC"),g.forEach(d),t=W(k,`
			Most viewed articles for `),i=W(k,l),n=F(k),o=$(k,"SPAN",{class:!0});var m=E(o);c=W(m,"\u21DD"),m.forEach(d),k.forEach(d),_=F(f),B(y.$$.fragment,f),this.h()},h(){h(a,"class","dark:text-cyan-300 dark:hover:text-cyan-500 dark:active:text-cyan-700 hover:underline cursor-pointer"),h(o,"class",u=s[3]?"dark:text-cyan-300 dark:hover:text-cyan-500 dark:active:text-cyan-700 hover:underline cursor-pointer":"text-gray-400"),h(e,"class","text-center dark:text-white text-gray-800 text-5xl mt-4 italic")},m(f,k){T(f,e,k),p(e,a),p(a,r),p(e,t),p(e,i),p(e,n),p(e,o),p(o,c),T(f,_,k),Y(y,f,k),D=!0,I||(b=[Z(a,"click",s[4]),Z(o,"click",s[5])],I=!0)},p(f,k){(!D||k&4)&&l!==(l=f[2].toLocaleDateString()+"")&&H(i,l),(!D||k&8&&u!==(u=f[3]?"dark:text-cyan-300 dark:hover:text-cyan-500 dark:active:text-cyan-700 hover:underline cursor-pointer":"text-gray-400"))&&h(o,"class",u);const g={};k&2&&(g.articles=f[1]),y.$set(g)},i(f){D||(S(y.$$.fragment,f),D=!0)},o(f){x(y.$$.fragment,f),D=!1},d(f){f&&d(e),f&&d(_),U(y,f),I=!1,ke(b)}}}function fe(s){let e,a,r,t,l,i,n,o;return{c(){e=w("section"),a=w("h1"),r=N("Welcome to Wiki Search "),t=w("aside"),l=N("Loading popular articles..."),this.h()},l(c){e=$(c,"SECTION",{class:!0});var u=E(e);a=$(u,"H1",{class:!0});var _=E(a);r=W(_,"Welcome to Wiki Search "),t=$(_,"ASIDE",{class:!0});var y=E(t);l=W(y,"Loading popular articles..."),y.forEach(d),_.forEach(d),u.forEach(d),this.h()},h(){h(t,"class","mt-5 italic text-4xl dark:text-cyan-300 text-blue-500"),h(a,"class","text-center dark:text-white text-gray-800 text-8xl mt-10"),h(e,"class","h-full")},m(c,u){T(c,e,u),p(e,a),p(a,r),p(a,t),p(t,l),o=!0},i(c){o||(ue(()=>{n&&n.end(1),i=he(e,O,{}),i.start()}),o=!0)},o(c){i&&i.invalidate(),n=de(e,O,{}),o=!1},d(c){c&&d(e),c&&n&&n.end()}}}function Te(s){let e,a,r,t=s[0].length>0&&ne(s),l=s[0].length==0&&oe(s);return{c(){t&&t.c(),e=P(),l&&l.c(),a=M()},l(i){t&&t.l(i),e=F(i),l&&l.l(i),a=M()},m(i,n){t&&t.m(i,n),T(i,e,n),l&&l.m(i,n),T(i,a,n),r=!0},p(i,[n]){i[0].length>0?t?(t.p(i,n),n&1&&S(t,1)):(t=ne(i),t.c(),S(t,1),t.m(e.parentNode,e)):t&&(R(),x(t,1,1,()=>{t=null}),q()),i[0].length==0?l?(l.p(i,n),n&1&&S(l,1)):(l=oe(i),l.c(),S(l,1),l.m(a.parentNode,a)):l&&(R(),x(l,1,1,()=>{l=null}),q())},i(i){r||(S(t),S(l),r=!0)},o(i){x(t),x(l),r=!1},d(i){t&&t.d(i),i&&d(e),l&&l.d(i),i&&d(a)}}}function xe(s,e,a){let r=[],t=[],l=new Date,i=!0;L.searchResults.subscribe(u=>{a(0,r=u)}),L.featuredArticles.subscribe(u=>{if(u.data){a(2,l=u.featuredDate),a(3,i=c()),a(1,t=u.data.sort((_,y)=>{const D=_.views,I=y.views;return D<I?1:D===I?0:-1}));for(let _=0;_<t.length;_++)console.log(_,t[_].title),a(1,t[_].i=1+_,t)}}),ve(async()=>{console.log("app mounted!"),await L.getFeaturedPosts(new Date)});const n=()=>{L.getFeaturedPosts(ye(l))},o=()=>{c()&&L.getFeaturedPosts(ee(l))},c=()=>{const u=new Date;return u.setHours(0),ee(l).getTime()<u.getTime()};return[r,t,l,i,n,o]}class Me extends V{constructor(e){super(),j(this,e,xe,Te,G,{})}}export{Me as default};
