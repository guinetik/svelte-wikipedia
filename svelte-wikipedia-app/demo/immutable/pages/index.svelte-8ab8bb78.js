import{S as z,i as G,s as H,e as b,c as w,a as y,d as u,b as f,R as Z,g as I,I as d,t as O,h as T,j as B,k as N,m as C,U as oe,a0 as fe,_ as ue,M as _e,l as D,w as F,x as U,y as K,q as v,o as A,B as Q,n as V,a2 as de,p as j,a3 as me,v as ge}from"../chunks/index-aef86bfd.js";import{c as pe,a as ke,e as ve,f as P}from"../chunks/index-d3daf7d9.js";import{W as L}from"../chunks/WikiApiClient-597c6a77.js";import"../chunks/index-732587ae.js";function x(s,e,r){const t=s.slice();return t[1]=e[r],t}function ee(s){let e,r,t,l,i,a;return{c(){e=b("div"),r=b("a"),t=b("img"),this.h()},l(n){e=w(n,"DIV",{class:!0});var c=y(e);r=w(c,"A",{href:!0,target:!0,class:!0});var o=y(r);t=w(o,"IMG",{alt:!0,src:!0,class:!0}),o.forEach(u),c.forEach(u),this.h()},h(){f(t,"alt",l=s[0].title),Z(t.src,i=s[0].image)||f(t,"src",i),f(t,"class","w-full z-10 object-top object-cover max-h-80"),f(r,"href",a=s[0].link),f(r,"target","_blank"),f(r,"class","dark:text-cyan-300 text-blue-600"),f(e,"class","bg-white")},m(n,c){I(n,e,c),d(e,r),d(r,t)},p(n,c){c&1&&l!==(l=n[0].title)&&f(t,"alt",l),c&1&&!Z(t.src,i=n[0].image)&&f(t,"src",i),c&1&&a!==(a=n[0].link)&&f(r,"href",a)},d(n){n&&u(e)}}}function te(s){let e,r=s[0].text+"",t;return{c(){e=b("p"),t=O(r),this.h()},l(l){e=w(l,"P",{class:!0});var i=y(e);t=T(i,r),i.forEach(u),this.h()},h(){f(e,"class","dark:text-gray-300 text-gray-700 text-base article-text text-ellipsis svelte-9ptqoz")},m(l,i){I(l,e,i),d(e,t)},p(l,i){i&1&&r!==(r=l[0].text+"")&&B(t,r)},d(l){l&&u(e)}}}function le(s){let e,r,t=s[1]+"",l,i,a;return{c(){e=b("a"),r=b("span"),l=O(t),i=N(),this.h()},l(n){e=w(n,"A",{target:!0,href:!0});var c=y(e);r=w(c,"SPAN",{class:!0});var o=y(r);l=T(o,t),o.forEach(u),i=C(c),c.forEach(u),this.h()},h(){f(r,"class","inline-block bg-gray-200 rounded-full px-3 py-1 text-sm font-semibold text-gray-700 mr-2 mb-2"),f(e,"target","_blank"),f(e,"href",a=s[1].includes("views")?s[0].link:s[0].link.replace(s[0].link.split("/").pop(),s[1]))},m(n,c){I(n,e,c),d(e,r),d(r,l),d(e,i)},p(n,c){c&1&&t!==(t=n[1]+"")&&B(l,t),c&1&&a!==(a=n[1].includes("views")?n[0].link:n[0].link.replace(n[0].link.split("/").pop(),n[1]))&&f(e,"href",a)},d(n){n&&u(e)}}}function be(s){let e,r,t,l,i,a=s[0].title+"",n,c,o,m,$,S,q,R,g=s[0].image&&ee(s),p=s[0].text&&te(s),W=s[0].tags,k=[];for(let _=0;_<W.length;_+=1)k[_]=le(x(s,W,_));return{c(){e=b("article"),g&&g.c(),r=N(),t=b("div"),l=b("a"),i=b("h2"),n=O(a),o=N(),p&&p.c(),m=N(),$=b("div");for(let _=0;_<k.length;_+=1)k[_].c();this.h()},l(_){e=w(_,"ARTICLE",{class:!0});var E=y(e);g&&g.l(E),r=C(E),t=w(E,"DIV",{class:!0});var h=y(t);l=w(h,"A",{href:!0,target:!0,class:!0});var M=y(l);i=w(M,"H2",{class:!0});var X=y(i);n=T(X,a),X.forEach(u),M.forEach(u),o=C(h),p&&p.l(h),h.forEach(u),m=C(E),$=w(E,"DIV",{class:!0});var Y=y($);for(let J=0;J<k.length;J+=1)k[J].l(Y);Y.forEach(u),E.forEach(u),this.h()},h(){f(i,"class","font-bold text-xl mb-2 hover:underline"),f(l,"href",c=s[0].link),f(l,"target","_blank"),f(l,"class","dark:text-cyan-300 text-blue-600"),f(t,"class","px-6 py-4"),f($,"class","px-6 pb-2"),f(e,"class","rounded overflow-hidden shadow-lg bg-white dark:bg-gray-700 dark:border-l-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white")},m(_,E){I(_,e,E),g&&g.m(e,null),d(e,r),d(e,t),d(t,l),d(l,i),d(i,n),d(t,o),p&&p.m(t,null),d(e,m),d(e,$);for(let h=0;h<k.length;h+=1)k[h].m($,null);R=!0},p(_,[E]){if(s=_,s[0].image?g?g.p(s,E):(g=ee(s),g.c(),g.m(e,r)):g&&(g.d(1),g=null),(!R||E&1)&&a!==(a=s[0].title+"")&&B(n,a),(!R||E&1&&c!==(c=s[0].link))&&f(l,"href",c),s[0].text?p?p.p(s,E):(p=te(s),p.c(),p.m(t,null)):p&&(p.d(1),p=null),E&1){W=s[0].tags;let h;for(h=0;h<W.length;h+=1){const M=x(s,W,h);k[h]?k[h].p(M,E):(k[h]=le(M),k[h].c(),k[h].m($,null))}for(;h<k.length;h+=1)k[h].d(1);k.length=W.length}},i(_){R||(oe(()=>{q&&q.end(1),S=fe(e,ke,{y:100*s[0].i,duration:1e3,delay:100*s[0].i%10,easing:pe}),S.start()}),R=!0)},o(_){S&&S.invalidate(),q=ue(e,P,{duration:500,easing:ve}),R=!1},d(_){_&&u(e),g&&g.d(),p&&p.d(),_e(k,_),_&&q&&q.end()}}}function we(s,e,r){let{article:t={title:"Title",text:"text",tags:["tags"],link:"https://en.wikipedia.org/wiki/JavaScript",image:"https://upload.wikimedia.org/wikipedia/commons/thumb/9/91/JavaScript_screenshot.png/450px-JavaScript_screenshot.png"}}=e;return s.$$set=l=>{"article"in l&&r(0,t=l.article)},[t]}class $e extends z{constructor(e){super(),G(this,e,we,be,H,{article:0})}}function ie(s,e,r){const t=s.slice();return t[1]=e[r],t}function re(s,e){let r,t,l;return t=new $e({props:{article:e[1]}}),{key:s,first:null,c(){r=D(),F(t.$$.fragment),this.h()},l(i){r=D(),U(t.$$.fragment,i),this.h()},h(){this.first=r},m(i,a){I(i,r,a),K(t,i,a),l=!0},p(i,a){e=i;const n={};a&1&&(n.article=e[1]),t.$set(n)},i(i){l||(v(t.$$.fragment,i),l=!0)},o(i){A(t.$$.fragment,i),l=!1},d(i){i&&u(r),Q(t,i)}}}function Ee(s){let e,r,t=[],l=new Map,i,a=s[0];const n=c=>c[1].i;for(let c=0;c<a.length;c+=1){let o=ie(s,a,c),m=n(o);l.set(m,t[c]=re(m,o))}return{c(){e=b("section"),r=b("div");for(let c=0;c<t.length;c+=1)t[c].c();this.h()},l(c){e=w(c,"SECTION",{});var o=y(e);r=w(o,"DIV",{class:!0});var m=y(r);for(let $=0;$<t.length;$+=1)t[$].l(m);m.forEach(u),o.forEach(u),this.h()},h(){f(r,"class","p-10 grid grid-cols-1 sm:grid-cols-1 md:grid-cols-3 lg:grid-cols-3 xl:grid-cols-3 gap-5")},m(c,o){I(c,e,o),d(e,r);for(let m=0;m<t.length;m+=1)t[m].m(r,null);i=!0},p(c,[o]){o&1&&(a=c[0],V(),t=de(t,o,n,1,c,a,l,r,me,re,null,ie),j())},i(c){if(!i){for(let o=0;o<a.length;o+=1)v(t[o]);i=!0}},o(c){for(let o=0;o<t.length;o+=1)A(t[o]);i=!1},d(c){c&&u(e);for(let o=0;o<t.length;o+=1)t[o].d()}}}function ye(s,e,r){let{articles:t=[]}=e;return s.$$set=l=>{"articles"in l&&r(0,t=l.articles)},[t]}class he extends z{constructor(e){super(),G(this,e,ye,Ee,H,{articles:0})}}function ae(s){let e,r;return e=new he({props:{articles:s[0]}}),{c(){F(e.$$.fragment)},l(t){U(e.$$.fragment,t)},m(t,l){K(e,t,l),r=!0},p(t,l){const i={};l&1&&(i.articles=t[0]),e.$set(i)},i(t){r||(v(e.$$.fragment,t),r=!0)},o(t){A(e.$$.fragment,t),r=!1},d(t){Q(e,t)}}}function se(s){let e,r,t,l=s[1].length>0&&ne(s),i=s[1].length==0&&ce();return{c(){l&&l.c(),e=N(),i&&i.c(),r=D()},l(a){l&&l.l(a),e=C(a),i&&i.l(a),r=D()},m(a,n){l&&l.m(a,n),I(a,e,n),i&&i.m(a,n),I(a,r,n),t=!0},p(a,n){a[1].length>0?l?(l.p(a,n),n&2&&v(l,1)):(l=ne(a),l.c(),v(l,1),l.m(e.parentNode,e)):l&&(V(),A(l,1,1,()=>{l=null}),j()),a[1].length==0?i?n&2&&v(i,1):(i=ce(),i.c(),v(i,1),i.m(r.parentNode,r)):i&&(V(),A(i,1,1,()=>{i=null}),j())},i(a){t||(v(l),v(i),t=!0)},o(a){A(l),A(i),t=!1},d(a){l&&l.d(a),a&&u(e),i&&i.d(a),a&&u(r)}}}function ne(s){let e,r;return e=new he({props:{articles:s[1]}}),{c(){F(e.$$.fragment)},l(t){U(e.$$.fragment,t)},m(t,l){K(e,t,l),r=!0},p(t,l){const i={};l&2&&(i.articles=t[1]),e.$set(i)},i(t){r||(v(e.$$.fragment,t),r=!0)},o(t){A(e.$$.fragment,t),r=!1},d(t){Q(e,t)}}}function ce(s){let e,r,t,l,i,a,n,c;return{c(){e=b("section"),r=b("h1"),t=O("Welcome to Wiki Search "),l=b("aside"),i=O("Loading popular articles..."),this.h()},l(o){e=w(o,"SECTION",{class:!0});var m=y(e);r=w(m,"H1",{class:!0});var $=y(r);t=T($,"Welcome to Wiki Search "),l=w($,"ASIDE",{class:!0});var S=y(l);i=T(S,"Loading popular articles..."),S.forEach(u),$.forEach(u),m.forEach(u),this.h()},h(){f(l,"class","mt-5 italic text-4xl dark:text-cyan-300 text-blue-500"),f(r,"class","text-center dark:text-white text-gray-800 text-8xl mt-10"),f(e,"class","h-full")},m(o,m){I(o,e,m),d(e,r),d(r,t),d(r,l),d(l,i),c=!0},i(o){c||(oe(()=>{n&&n.end(1),a=fe(e,P,{}),a.start()}),c=!0)},o(o){a&&a.invalidate(),n=ue(e,P,{}),c=!1},d(o){o&&u(e),o&&n&&n.end()}}}function Ae(s){let e,r,t,l=s[0].length>0&&ae(s),i=s[0].length==0&&se(s);return{c(){l&&l.c(),e=N(),i&&i.c(),r=D()},l(a){l&&l.l(a),e=C(a),i&&i.l(a),r=D()},m(a,n){l&&l.m(a,n),I(a,e,n),i&&i.m(a,n),I(a,r,n),t=!0},p(a,[n]){a[0].length>0?l?(l.p(a,n),n&1&&v(l,1)):(l=ae(a),l.c(),v(l,1),l.m(e.parentNode,e)):l&&(V(),A(l,1,1,()=>{l=null}),j()),a[0].length==0?i?(i.p(a,n),n&1&&v(i,1)):(i=se(a),i.c(),v(i,1),i.m(r.parentNode,r)):i&&(V(),A(i,1,1,()=>{i=null}),j())},i(a){t||(v(l),v(i),t=!0)},o(a){A(l),A(i),t=!1},d(a){l&&l.d(a),a&&u(e),i&&i.d(a),a&&u(r)}}}function Ie(s,e,r){let{searchResults:t=[]}=e,{featuredArticles:l=[]}=e;return L.searchResults.subscribe(i=>{r(0,t=i)}),L.featuredArticles.subscribe(i=>{r(1,l=i.sort((a,n)=>{const c=a.views,o=n.views;return c<o?1:c===o?0:-1}));for(let a=0;a<l.length;a++)console.log(a,l[a].title),r(1,l[a].i=1+a,l)}),ge(async()=>{console.log("app mounted!"),await L.getFeaturedPosts()}),s.$$set=i=>{"searchResults"in i&&r(0,t=i.searchResults),"featuredArticles"in i&&r(1,l=i.featuredArticles)},[t,l]}class Ce extends z{constructor(e){super(),G(this,e,Ie,Ae,H,{searchResults:0,featuredArticles:1})}}export{Ce as default};
