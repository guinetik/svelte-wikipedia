import{S as L,i as M,s as Y,e as E,c as D,a as A,d as p,b as _,U as Z,g as I,I as g,t as F,h as C,j as H,k as T,m as x,W as he,a0 as _e,a3 as de,K as me,l as J,w as B,x as z,y as K,q as S,o as N,B as U,n as R,a4 as ge,p as V,a5 as ke,J as ee,G as ve,N as be,v as we}from"../chunks/index-f0dd9566.js";import{c as ye,f as j,d as $e,e as Ee,a as G,Y as De,b as Ae,h as te}from"../chunks/index-1ae2aa9e.js";import{W as O}from"../chunks/WikiArticle.svelte_svelte_type_style_lang-e93f4dbb.js";import"../chunks/singletons-e01e0108.js";function le(s,e,a){const l=s.slice();return l[1]=e[a],l}function ae(s){let e,a,l,i,t,r;return{c(){e=E("div"),a=E("a"),l=E("img"),this.h()},l(n){e=D(n,"DIV",{class:!0});var o=A(e);a=D(o,"A",{href:!0,target:!0,class:!0});var c=A(a);l=D(c,"IMG",{alt:!0,src:!0,class:!0}),c.forEach(p),o.forEach(p),this.h()},h(){_(l,"alt",i=s[0].title),Z(l.src,t=s[0].image)||_(l,"src",t),_(l,"class","w-full z-10 object-top object-covers"),_(a,"href",r=s[0].link),_(a,"target","_blank"),_(a,"class","dark:text-cyan-300 text-blue-600"),_(e,"class","bg-white")},m(n,o){I(n,e,o),g(e,a),g(a,l)},p(n,o){o&1&&i!==(i=n[0].title)&&_(l,"alt",i),o&1&&!Z(l.src,t=n[0].image)&&_(l,"src",t),o&1&&r!==(r=n[0].link)&&_(a,"href",r)},d(n){n&&p(e)}}}function re(s){let e,a=s[0].text+"",l,i;return{c(){e=E("p"),l=F(a),this.h()},l(t){e=D(t,"P",{class:!0});var r=A(e);l=C(r,a),r.forEach(p),this.h()},h(){_(e,"class",i="dark:text-gray-300 text-gray-700 text-base text-ellipsis "+(s[0].image?"article-text":"article-text-expanded")+" svelte-1694y91")},m(t,r){I(t,e,r),g(e,l)},p(t,r){r&1&&a!==(a=t[0].text+"")&&H(l,a),r&1&&i!==(i="dark:text-gray-300 text-gray-700 text-base text-ellipsis "+(t[0].image?"article-text":"article-text-expanded")+" svelte-1694y91")&&_(e,"class",i)},d(t){t&&p(e)}}}function ie(s){let e,a,l=s[1]+"",i,t,r;return{c(){e=E("a"),a=E("span"),i=F(l),t=T(),this.h()},l(n){e=D(n,"A",{target:!0,href:!0});var o=A(e);a=D(o,"SPAN",{class:!0});var c=A(a);i=C(c,l),c.forEach(p),t=x(o),o.forEach(p),this.h()},h(){_(a,"class","inline-block bg-gray-200 rounded-full px-3 py-1 text-sm font-semibold text-gray-700 mr-2 mb-2"),_(e,"target","_blank"),_(e,"href",r=s[1].includes("views")?s[0].link:s[0].link.replace(s[0].link.split("/").pop(),s[1]))},m(n,o){I(n,e,o),g(e,a),g(a,i),g(e,t)},p(n,o){o&1&&l!==(l=n[1]+"")&&H(i,l),o&1&&r!==(r=n[1].includes("views")?n[0].link:n[0].link.replace(n[0].link.split("/").pop(),n[1]))&&_(e,"href",r)},d(n){n&&p(e)}}}function Se(s){let e,a,l,i=s[0].title+"",t,r,n,o,c,k,u,m,w,y,d=s[0].image&&ae(s),b=s[0].text&&re(s),P=s[0].tags,$=[];for(let f=0;f<P.length;f+=1)$[f]=ie(le(s,P,f));return{c(){e=E("article"),a=E("a"),l=E("h2"),t=F(i),n=T(),d&&d.c(),o=T(),c=E("div"),b&&b.c(),k=T(),u=E("div");for(let f=0;f<$.length;f+=1)$[f].c();this.h()},l(f){e=D(f,"ARTICLE",{class:!0});var h=A(e);a=D(h,"A",{href:!0,target:!0,class:!0});var v=A(a);l=D(v,"H2",{class:!0});var W=A(l);t=C(W,i),W.forEach(p),v.forEach(p),n=x(h),d&&d.l(h),o=x(h),c=D(h,"DIV",{class:!0});var Q=A(c);b&&b.l(Q),Q.forEach(p),k=x(h),u=D(h,"DIV",{class:!0});var X=A(u);for(let q=0;q<$.length;q+=1)$[q].l(X);X.forEach(p),h.forEach(p),this.h()},h(){_(l,"class","font-bold text-xl mb-2 hover:underline"),_(a,"href",r=s[0].link),_(a,"target","_blank"),_(a,"class","dark:text-cyan-300 text-blue-600"),_(c,"class","px-6 py-4"),_(u,"class","px-6 pb-2"),_(e,"class","rounded overflow-hidden shadow-lg bg-white dark:bg-gray-700 dark:border-l-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white")},m(f,h){I(f,e,h),g(e,a),g(a,l),g(l,t),g(e,n),d&&d.m(e,null),g(e,o),g(e,c),b&&b.m(c,null),g(e,k),g(e,u);for(let v=0;v<$.length;v+=1)$[v].m(u,null);y=!0},p(f,[h]){if(s=f,(!y||h&1)&&i!==(i=s[0].title+"")&&H(t,i),(!y||h&1&&r!==(r=s[0].link))&&_(a,"href",r),s[0].image?d?d.p(s,h):(d=ae(s),d.c(),d.m(e,o)):d&&(d.d(1),d=null),s[0].text?b?b.p(s,h):(b=re(s),b.c(),b.m(c,null)):b&&(b.d(1),b=null),h&1){P=s[0].tags;let v;for(v=0;v<P.length;v+=1){const W=le(s,P,v);$[v]?$[v].p(W,h):($[v]=ie(W),$[v].c(),$[v].m(u,null))}for(;v<$.length;v+=1)$[v].d(1);$.length=P.length}},i(f){y||(he(()=>{w&&w.end(1),m=_e(e,j($e),{y:100*s[0].i,duration:1e3,delay:100*s[0].i%10,easing:ye}),m.start()}),y=!0)},o(f){m&&m.invalidate(),w=de(e,j(G),{duration:500,easing:Ee}),y=!1},d(f){f&&p(e),d&&d.d(),b&&b.d(),me($,f),f&&w&&w.end()}}}function Ie(s,e,a){let{article:l={title:"Title",text:"text",tags:["tags"],link:"https://en.wikipedia.org/wiki/JavaScript",image:"https://upload.wikimedia.org/wikipedia/commons/thumb/9/91/JavaScript_screenshot.png/450px-JavaScript_screenshot.png"}}=e;return s.$$set=i=>{"article"in i&&a(0,l=i.article)},[l]}class Ne extends L{constructor(e){super(),M(this,e,Ie,Se,Y,{article:0})}}function se(s,e,a){const l=s.slice();return l[1]=e[a],l}function ne(s,e){let a,l,i;return l=new Ne({props:{article:e[1]}}),{key:s,first:null,c(){a=J(),B(l.$$.fragment),this.h()},l(t){a=J(),z(l.$$.fragment,t),this.h()},h(){this.first=a},m(t,r){I(t,a,r),K(l,t,r),i=!0},p(t,r){e=t;const n={};r&1&&(n.article=e[1]),l.$set(n)},i(t){i||(S(l.$$.fragment,t),i=!0)},o(t){N(l.$$.fragment,t),i=!1},d(t){t&&p(a),U(l,t)}}}function Te(s){let e,a,l=[],i=new Map,t,r=s[0];const n=o=>o[1].i;for(let o=0;o<r.length;o+=1){let c=se(s,r,o),k=n(c);i.set(k,l[o]=ne(k,c))}return{c(){e=E("section"),a=E("div");for(let o=0;o<l.length;o+=1)l[o].c();this.h()},l(o){e=D(o,"SECTION",{});var c=A(e);a=D(c,"DIV",{class:!0});var k=A(a);for(let u=0;u<l.length;u+=1)l[u].l(k);k.forEach(p),c.forEach(p),this.h()},h(){_(a,"class","p-10 grid grid-cols-1 sm:grid-cols-1 md:grid-cols-3 lg:grid-cols-3 xl:grid-cols-3 gap-5")},m(o,c){I(o,e,c),g(e,a);for(let k=0;k<l.length;k+=1)l[k].m(a,null);t=!0},p(o,[c]){c&1&&(r=o[0],R(),l=ge(l,c,n,1,o,r,i,a,ke,ne,null,se),V())},i(o){if(!t){for(let c=0;c<r.length;c+=1)S(l[c]);t=!0}},o(o){for(let c=0;c<l.length;c+=1)N(l[c]);t=!1},d(o){o&&p(e);for(let c=0;c<l.length;c+=1)l[c].d()}}}function xe(s,e,a){let{articles:l=[]}=e;return s.$$set=i=>{"articles"in i&&a(0,l=i.articles)},[l]}class pe extends L{constructor(e){super(),M(this,e,xe,Te,Y,{articles:0})}}function oe(s){let e,a;return e=new pe({props:{articles:s[0]}}),{c(){B(e.$$.fragment)},l(l){z(e.$$.fragment,l)},m(l,i){K(e,l,i),a=!0},p(l,i){const t={};i&1&&(t.articles=l[0]),e.$set(t)},i(l){a||(S(e.$$.fragment,l),a=!0)},o(l){N(e.$$.fragment,l),a=!1},d(l){U(e,l)}}}function ce(s){let e,a,l,i=s[1].length>0&&fe(s),t=s[1].length==0&&ue(s);return{c(){i&&i.c(),e=T(),t&&t.c(),a=J()},l(r){i&&i.l(r),e=x(r),t&&t.l(r),a=J()},m(r,n){i&&i.m(r,n),I(r,e,n),t&&t.m(r,n),I(r,a,n),l=!0},p(r,n){r[1].length>0?i?(i.p(r,n),n&2&&S(i,1)):(i=fe(r),i.c(),S(i,1),i.m(e.parentNode,e)):i&&(R(),N(i,1,1,()=>{i=null}),V()),r[1].length==0?t?(t.p(r,n),n&2&&S(t,1)):(t=ue(r),t.c(),S(t,1),t.m(a.parentNode,a)):t&&(R(),N(t,1,1,()=>{t=null}),V())},i(r){l||(S(i),S(t),l=!0)},o(r){N(i),N(t),l=!1},d(r){i&&i.d(r),r&&p(e),t&&t.d(r),r&&p(a)}}}function fe(s){let e,a,l,i,t=s[4]("home_featured_header")+"",r,n,o=s[2].toLocaleDateString()+"",c,k,u,m,w,y,d,b,P,$;return d=new pe({props:{articles:s[1]}}),{c(){e=E("h1"),a=E("span"),l=F("\u21DC"),i=T(),r=F(t),n=T(),c=F(o),k=T(),u=E("span"),m=F("\u21DD"),y=T(),B(d.$$.fragment),this.h()},l(f){e=D(f,"H1",{class:!0});var h=A(e);a=D(h,"SPAN",{class:!0});var v=A(a);l=C(v,"\u21DC"),v.forEach(p),i=x(h),r=C(h,t),n=x(h),c=C(h,o),k=x(h),u=D(h,"SPAN",{class:!0});var W=A(u);m=C(W,"\u21DD"),W.forEach(p),h.forEach(p),y=x(f),z(d.$$.fragment,f),this.h()},h(){_(a,"class","dark:text-cyan-300 dark:hover:text-cyan-500 dark:active:text-cyan-700 hover:underline cursor-pointer"),_(u,"class",w=s[3]?"dark:text-cyan-300 dark:hover:text-cyan-500 dark:active:text-cyan-700 hover:underline cursor-pointer":"text-gray-400"),_(e,"class","text-center dark:text-white text-gray-800 text-5xl mt-4 italic")},m(f,h){I(f,e,h),g(e,a),g(a,l),g(e,i),g(e,r),g(e,n),g(e,c),g(e,k),g(e,u),g(u,m),I(f,y,h),K(d,f,h),b=!0,P||($=[ee(a,"click",s[5]),ee(u,"click",s[6])],P=!0)},p(f,h){(!b||h&16)&&t!==(t=f[4]("home_featured_header")+"")&&H(r,t),(!b||h&4)&&o!==(o=f[2].toLocaleDateString()+"")&&H(c,o),(!b||h&8&&w!==(w=f[3]?"dark:text-cyan-300 dark:hover:text-cyan-500 dark:active:text-cyan-700 hover:underline cursor-pointer":"text-gray-400"))&&_(u,"class",w);const v={};h&2&&(v.articles=f[1]),d.$set(v)},i(f){b||(S(d.$$.fragment,f),b=!0)},o(f){N(d.$$.fragment,f),b=!1},d(f){f&&p(e),f&&p(y),U(d,f),P=!1,ve($)}}}function ue(s){let e,a,l=s[4]("home_header")+"",i,t,r,n=s[4]("home_aside")+"",o,c,k,u;return{c(){e=E("section"),a=E("h1"),i=F(l),t=T(),r=E("aside"),o=F(n),this.h()},l(m){e=D(m,"SECTION",{class:!0});var w=A(e);a=D(w,"H1",{class:!0});var y=A(a);i=C(y,l),t=x(y),r=D(y,"ASIDE",{class:!0});var d=A(r);o=C(d,n),d.forEach(p),y.forEach(p),w.forEach(p),this.h()},h(){_(r,"class","mt-5 italic text-4xl dark:text-cyan-300 text-blue-500"),_(a,"class","text-center dark:text-white text-gray-800 text-8xl mt-10"),_(e,"class","h-full")},m(m,w){I(m,e,w),g(e,a),g(a,i),g(a,t),g(a,r),g(r,o),u=!0},p(m,w){(!u||w&16)&&l!==(l=m[4]("home_header")+"")&&H(i,l),(!u||w&16)&&n!==(n=m[4]("home_aside")+"")&&H(o,n)},i(m){u||(he(()=>{k&&k.end(1),c=_e(e,j(G),{}),c.start()}),u=!0)},o(m){c&&c.invalidate(),k=de(e,j(G),{}),u=!1},d(m){m&&p(e),m&&k&&k.end()}}}function Pe(s){let e,a,l,i=s[0].length>0&&oe(s),t=s[0].length==0&&ce(s);return{c(){i&&i.c(),e=T(),t&&t.c(),a=J()},l(r){i&&i.l(r),e=x(r),t&&t.l(r),a=J()},m(r,n){i&&i.m(r,n),I(r,e,n),t&&t.m(r,n),I(r,a,n),l=!0},p(r,[n]){r[0].length>0?i?(i.p(r,n),n&1&&S(i,1)):(i=oe(r),i.c(),S(i,1),i.m(e.parentNode,e)):i&&(R(),N(i,1,1,()=>{i=null}),V()),r[0].length==0?t?(t.p(r,n),n&1&&S(t,1)):(t=ce(r),t.c(),S(t,1),t.m(a.parentNode,a)):t&&(R(),N(t,1,1,()=>{t=null}),V())},i(r){l||(S(i),S(t),l=!0)},o(r){N(i),N(t),l=!1},d(r){i&&i.d(r),r&&p(e),t&&t.d(r),r&&p(a)}}}function Fe(s,e,a){let l;be(s,De,u=>a(4,l=u));let i=[],t=[],r=new Date,n=!0;we(async()=>{console.log("app mounted!"),t.length==0&&await O.getFeaturedPosts(new Date)});const o=()=>{O.getFeaturedPosts(Ae(r))},c=()=>{k()&&O.getFeaturedPosts(te(r))},k=()=>{const u=new Date;return u.setHours(0),te(r).getTime()<u.getTime()};return O.searchResults.subscribe(u=>{a(0,i=u)}),O.featuredArticles.subscribe(u=>{if(u.data){a(2,r=u.featuredDate),a(3,n=k()),a(1,t=u.data.sort((m,w)=>{const y=m.views,d=w.views;return y<d?1:y===d?0:-1}));for(let m=0;m<t.length;m++)console.log(m,t[m].title),a(1,t[m].i=1+m,t)}}),[i,t,r,n,l,o,c]}class Oe extends L{constructor(e){super(),M(this,e,Fe,Pe,Y,{})}}export{Oe as default};
